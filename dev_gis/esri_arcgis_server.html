<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>「ESRI」ArcGIS Server | kite-notes</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/kite-notes/icon/nest.png">
    <meta name="description" content="some notes about development.">
    <meta name="keywords" content="笔记">
    
    <link rel="preload" href="/kite-notes/assets/css/0.styles.f5731900.css" as="style"><link rel="preload" href="/kite-notes/assets/js/app.5dc82d96.js" as="script"><link rel="preload" href="/kite-notes/assets/js/2.6a409917.js" as="script"><link rel="preload" href="/kite-notes/assets/js/22.17163a68.js" as="script"><link rel="prefetch" href="/kite-notes/assets/js/10.f2ba713c.js"><link rel="prefetch" href="/kite-notes/assets/js/11.16dd54f6.js"><link rel="prefetch" href="/kite-notes/assets/js/12.623ca261.js"><link rel="prefetch" href="/kite-notes/assets/js/13.11866706.js"><link rel="prefetch" href="/kite-notes/assets/js/14.7d50c443.js"><link rel="prefetch" href="/kite-notes/assets/js/15.8e0fe604.js"><link rel="prefetch" href="/kite-notes/assets/js/16.d289b3d6.js"><link rel="prefetch" href="/kite-notes/assets/js/17.f5e9846d.js"><link rel="prefetch" href="/kite-notes/assets/js/18.52da8f0c.js"><link rel="prefetch" href="/kite-notes/assets/js/19.e00caebc.js"><link rel="prefetch" href="/kite-notes/assets/js/20.01799517.js"><link rel="prefetch" href="/kite-notes/assets/js/21.0bf7f712.js"><link rel="prefetch" href="/kite-notes/assets/js/23.c107cf2f.js"><link rel="prefetch" href="/kite-notes/assets/js/24.e2b2b935.js"><link rel="prefetch" href="/kite-notes/assets/js/25.84ba4df2.js"><link rel="prefetch" href="/kite-notes/assets/js/26.75c92247.js"><link rel="prefetch" href="/kite-notes/assets/js/27.efd9ac88.js"><link rel="prefetch" href="/kite-notes/assets/js/28.4eddef6f.js"><link rel="prefetch" href="/kite-notes/assets/js/29.8bd3d904.js"><link rel="prefetch" href="/kite-notes/assets/js/3.bf545f87.js"><link rel="prefetch" href="/kite-notes/assets/js/30.3cb9f33b.js"><link rel="prefetch" href="/kite-notes/assets/js/31.a66e4816.js"><link rel="prefetch" href="/kite-notes/assets/js/32.ffae9dd7.js"><link rel="prefetch" href="/kite-notes/assets/js/33.13496dfb.js"><link rel="prefetch" href="/kite-notes/assets/js/34.1d289e84.js"><link rel="prefetch" href="/kite-notes/assets/js/35.39ff3110.js"><link rel="prefetch" href="/kite-notes/assets/js/36.bd1d78cf.js"><link rel="prefetch" href="/kite-notes/assets/js/37.ddc7f7a8.js"><link rel="prefetch" href="/kite-notes/assets/js/4.4cddb015.js"><link rel="prefetch" href="/kite-notes/assets/js/5.d129e6b5.js"><link rel="prefetch" href="/kite-notes/assets/js/6.c851d9cf.js"><link rel="prefetch" href="/kite-notes/assets/js/7.6e252507.js"><link rel="prefetch" href="/kite-notes/assets/js/8.24cd82e5.js"><link rel="prefetch" href="/kite-notes/assets/js/9.29ee41e8.js">
    <link rel="stylesheet" href="/kite-notes/assets/css/0.styles.f5731900.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kite-notes/" class="home-link router-link-active"><img src="/kite-notes/icon/nest.png" alt="kite-notes" class="logo"> <span class="site-name can-hide">kite-notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/XiaofengZeng/kite-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/XiaofengZeng/kite-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>环境安装部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/env_deploy/soft_gis_geoscene.html" class="sidebar-link">「软件-GIS」GeoScene</a></li><li><a href="/kite-notes/env_deploy/soft_db_kingbase.html" class="sidebar-link">「软件-DB」Kingbase</a></li><li><a href="/kite-notes/env_deploy/tool_build_jenkins.html" class="sidebar-link">「工具-构建」Jenkins</a></li><li><a href="/kite-notes/env_deploy/tool_virtualize_docker.html" class="sidebar-link">「工具-虚拟化」Docker</a></li><li><a href="/kite-notes/env_deploy/tool_cvs_git.html" class="sidebar-link">「工具-代码控制」Git</a></li><li><a href="/kite-notes/env_deploy/tool_hub_gitlab.html" class="sidebar-link">「工具-代码托管」GitLab</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>「开发」前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/dev_frontend/tool_pnpm.html" class="sidebar-link">「工具-依赖管理」pnpm</a></li><li><a href="/kite-notes/dev_frontend/js_es6.html" class="sidebar-link">「JavaScript」ES6</a></li><li><a href="/kite-notes/dev_frontend/js_utils.html" class="sidebar-link">「JavaScript」常用操作</a></li><li><a href="/kite-notes/dev_frontend/js_throttle_debounce.html" class="sidebar-link">「JavaScript」节流&amp;防抖</a></li><li><a href="/kite-notes/dev_frontend/js_polling.html" class="sidebar-link">「JavaScript」轮询</a></li><li><a href="/kite-notes/dev_frontend/js_canvas.html" class="sidebar-link">「JavaScript」Canvas画布</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>「开发」GIS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/dev_gis/tool_mapshaper.html" class="sidebar-link">「小工具」mapshaper</a></li><li><a href="/kite-notes/dev_gis/algo_simplify.html" class="sidebar-link">「算法」抽稀（概化）</a></li><li><a href="/kite-notes/dev_gis/esri_arcgis_server.html" aria-current="page" class="active sidebar-link">「ESRI」ArcGIS Server</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kite-notes/dev_gis/esri_arcgis_server.html#export-map" class="sidebar-link">Export Map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kite-notes/dev_gis/esri_arcgis_server.html#应用场景" class="sidebar-link">应用场景</a></li><li class="sidebar-sub-header"><a href="/kite-notes/dev_gis/esri_arcgis_server.html#请求" class="sidebar-link">请求</a></li></ul></li><li class="sidebar-sub-header"><a href="/kite-notes/dev_gis/esri_arcgis_server.html#query" class="sidebar-link">Query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kite-notes/dev_gis/esri_arcgis_server.html#应用场景-2" class="sidebar-link">应用场景</a></li><li class="sidebar-sub-header"><a href="/kite-notes/dev_gis/esri_arcgis_server.html#请求-2" class="sidebar-link">请求</a></li></ul></li></ul></li><li><a href="/kite-notes/dev_gis/special_3d_gis.html" class="sidebar-link">「方向」三维GIS开发工程师</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>地理信息科学</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/gis/data_poi_aoi_loi.html" class="sidebar-link">「数据」POI/AOI/LOI</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>「系统」Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/os_linux/cmd.html" class="sidebar-link">「Linux」常用指令</a></li><li><a href="/kite-notes/os_linux/sh.html" class="sidebar-link">「Linux」常用脚本</a></li><li><a href="/kite-notes/os_linux/operation.html" class="sidebar-link">「Linux」常用操作</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>「系统」Windows</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/os_windows/cmd.html" class="sidebar-link">「Windows」常用指令</a></li><li><a href="/kite-notes/os_windows/bat.html" class="sidebar-link">「Windows」常用脚本</a></li><li><a href="/kite-notes/os_windows/operation.html" class="sidebar-link">「Windows」常用操作</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>「个人」总结与反思</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kite-notes/myself/summary_2022.html" class="sidebar-link">「年终总结」2022</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="「esri」arcgis-server"><a href="#「esri」arcgis-server" class="header-anchor">#</a> 「ESRI」ArcGIS Server</h1> <h2 id="export-map"><a href="#export-map" class="header-anchor">#</a> Export Map</h2> <h3 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h3> <ol><li><strong>地图图片的导出/获取</strong>。根据地理坐标范围，向地图服务发起请求获取响应格式的地图</li> <li><strong>系统底图的加载</strong>。本质是地图图片的获取。根据屏幕坐标与实际地理坐标的转换，得到当前地图视图的坐标范围，再向地图服务发起请求</li></ol> <h3 id="请求"><a href="#请求" class="header-anchor">#</a> 请求</h3> <ul><li>请求路由：<code>/export</code></li> <li>请求方式：<code>GET</code>/<code>POST</code></li> <li>请求参数（详见<a href="https://developers.arcgis.com/rest/services-reference/enterprise/export-map.htm" target="_blank" rel="noopener noreferrer">API文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）
<table><thead><tr><th>参数<br>(⭐️表示常用)</th> <th>说明</th></tr></thead> <tbody><tr><td>⭐️bbox</td> <td>边界范围（坐标范围）</td></tr> <tr><td>⭐️bboxSR</td> <td>边界范围的空间参考，支持WKT代号ID或具体空间参考定义文本，不定义则默认使用地图服务的空间参考</td></tr> <tr><td>⭐️layers</td> <td>需要导出的图层索引<br><strong>show</strong>:展示的图层索引<br><strong>hide</strong>：隐藏的图层索引<br><strong>include</strong>：包括的图层索引<br><strong>exclude</strong>：排除的图层索引</td></tr> <tr><td>layerDef</td> <td>图层过滤定义</td></tr> <tr><td>⭐️size</td> <td>导出地图的像素大小，默认为<code>400,400</code></td></tr> <tr><td>⭐️imgSR</td> <td>导出图片的空间参考，同<code>bboxSR</code></td></tr> <tr><td>⭐️format</td> <td>导出图片的格式，默认为<code>png</code></td></tr> <tr><td>⭐️transparent</td> <td>背景是否透明，默认为<code>false</code></td></tr> <tr><td>dpi</td> <td>导出图片的分辨率，默认为<code>96</code></td></tr> <tr><td>time</td> <td>导出的地图图像的时间瞬间或时间范围</td></tr> <tr><td>layerTimeOptions</td> <td>指定图层的时间定义</td></tr> <tr><td>dynamicLayers</td> <td>动态图层定义</td></tr> <tr><td>gdbVersion</td> <td>指定查询的地理数据库的版本，当不指定时，则默认使用发布地图服务时使用的版本</td></tr> <tr><td>mapScale</td> <td>地图的比例尺</td></tr> <tr><td>f</td> <td>请求返回的格式，默认是<code>html</code></td></tr></tbody></table></li></ul> <h2 id="query"><a href="#query" class="header-anchor">#</a> Query</h2> <h3 id="应用场景-2"><a href="#应用场景-2" class="header-anchor">#</a> 应用场景</h3> <ol><li><strong>属性查询（属性查图）</strong>。类似普通的数据库查询，但可以返回属性信息，选择性返回空间信息</li> <li><strong>空间查询（图查属性）</strong>。与属性查询类似，使用空间过滤条件查询对应的属性信息/空间信息</li> <li><strong>快速的空间操作</strong>。快速进行空间操作（如裁剪、合并、擦除...）获取用户所需的信息</li></ol> <h3 id="请求-2"><a href="#请求-2" class="header-anchor">#</a> 请求</h3> <ul><li>请求路由：<code>/query</code></li> <li>请求方式：<code>GET</code>/<code>POST</code></li> <li>请求参数（详见<a href="https://developers.arcgis.com/rest/services-reference/enterprise/query-map-service-layer-.htm" target="_blank" rel="noopener noreferrer">API文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）
<table><thead><tr><th>参数<br>(⭐️表示常用)</th> <th>说明</th></tr></thead> <tbody><tr><td>⭐️where</td> <td>属性查询SQL的where子句</td></tr> <tr><td>text</td> <td>对<code>displayField</code>的值查询（支持模糊查询）。<br>形成的查询Where子句：<code>&lt;displayField&gt; like '&lt;text&gt;'</code><br>当指定where参数后，该参数会被忽略</td></tr> <tr><td>objectIds</td> <td>查询指定ObjectID的属性</td></tr> <tr><td>time</td> <td>限制查询的时间瞬间或时间范围，常用于有时间尺度的地理数据（时空数据）</td></tr> <tr><td>⭐️geometry</td> <td>空间过滤-几何图形</td></tr> <tr><td>⭐️geometryType</td> <td>空间过滤-几何图形类<br><strong>esriGeometryPoint</strong>：点<br><strong>esriGeometryMultipoint</strong>：多点<br><strong>esriGeometryPolyline</strong>：折线<br><strong>esriGeometryPolygon</strong>：多边形<br><strong>esriGeometryEnvelope</strong>：外包矩形（默认值）</td></tr> <tr><td>⭐️inSR</td> <td>空间过滤-几何图像-空间参考，支持WKT代号ID或具体空间参考定义文本，不定义则默认使用地图服务的空间参考</td></tr> <tr><td>⭐️spatialRel</td> <td>空间过滤-对输入的geometry的空间关系查询</td></tr> <tr><td>relationParam</td> <td>属性查询SQL的where子句</td></tr> <tr><td>⭐️outFields</td> <td>输出的字段</td></tr> <tr><td>returnGeometry</td> <td>是否返回几何图形，默认为<code>true</code></td></tr> <tr><td>maxAllowableOffset</td> <td>最大允许误差范围，根据单位由<code>inSR</code>确定，若没有<code>inSR</code>，则使用该地图的空间参考</td></tr> <tr><td>geometryPrecision</td> <td>返回几何图形的精度，具体指的是坐标点的小数点位数（只支持XY坐标，M和Z值不支持）</td></tr> <tr><td>⭐️outSR</td> <td>输出的几何图形的空间参考定义，支持WKT代号ID或具体空间参考定义文本，不定义则默认使用地图服务的空间参考</td></tr> <tr><td>returnIdsOnly</td> <td>是否值只返回ObjectId数组，不返回要素集，默认为<code>false</code></td></tr> <tr><td>returnCountOnly</td> <td>是否只返回数量（通过count函数计算查询结果要素集中要素的数量），默认为<code>false</code></td></tr> <tr><td>orderByFields</td> <td>根据一个或多个字段进行排序，需要指定排序方式，否则默认采用升序（ASC）<br>需要地图服务支持高级查询（<strong>supportsAdvancedQueries</strong>）</td></tr> <tr><td>groupByFieldsForStatistics</td> <td>一个或多个用于分组统计的字段</td></tr> <tr><td>outStatistics</td> <td>基于（字段）对象字面量数组配置进行分组统计<br>需要地图服务支持统计查询（<strong>suppportsStatistics</strong>）</td></tr> <tr><td>returnZ</td> <td>是否返回Z值（高程值），默认为<code>false</code></td></tr> <tr><td>returnM</td> <td>是否返回M值（测量值），默认为<code>false</code></td></tr> <tr><td>gdbVersion</td> <td>指定查询的地理数据库的版本，当不指定时，则默认使用发布地图服务时使用的版本</td></tr> <tr><td>returnDistinctValues</td> <td>是否基于outField参数返回指定的字段的唯一值（去重），默认为<code>false</code></td></tr></tbody></table></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kite-notes/dev_gis/algo_simplify.html" class="prev">
        「算法」抽稀（概化）
      </a></span> <span class="next"><a href="/kite-notes/dev_gis/special_3d_gis.html">
        「方向」三维GIS开发工程师
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/kite-notes/assets/js/app.5dc82d96.js" defer></script><script src="/kite-notes/assets/js/2.6a409917.js" defer></script><script src="/kite-notes/assets/js/22.17163a68.js" defer></script>
  </body>
</html>
