import{_ as s}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as a,c as n,e}from"./app-S7AmktQN.js";const i="/kite-notes/assets/install-config-1-ky7tG64D.png",t="/kite-notes/assets/install-bash-1-XRcsUIDS.png",l="/kite-notes/assets/install-bash-2-cBLC-uC4.png",c="/kite-notes/assets/install-bash-3-al9cXAAu.png",o="/kite-notes/assets/install-done-1-aRAmCZoB.png",d="/kite-notes/assets/install-config-2-sdYeukeg.png",r="/kite-notes/assets/install-done-2-yhzBS7jI.png",p={},u=e(`<h1 id="kingbase-人大金仓数据库" tabindex="-1"><a class="header-anchor" href="#kingbase-人大金仓数据库" aria-hidden="true">#</a> Kingbase（人大金仓数据库）</h1><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><h3 id="检查安装前的基础环境" tabindex="-1"><a class="header-anchor" href="#检查安装前的基础环境" aria-hidden="true">#</a> 检查安装前的基础环境</h3><p>执行kdb_check.sh脚本，检查安装前的系统环境，在安装前将所需工具/配置进行调整，用于后续执行人大金仓安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">bash</span> kdb_check.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="命令行交互安装" tabindex="-1"><a class="header-anchor" href="#命令行交互安装" aria-hidden="true">#</a> 命令行交互安装</h3><p>在安装人大金仓安装之前，修改kdb_install.sh脚本的自定义配置，也可以选择默认安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> kdb_install.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+i+`" alt="命令行交互安装-自定义配置" tabindex="0" loading="lazy"><figcaption>命令行交互安装-自定义配置</figcaption></figure><p>执行kdb_install.sh脚本，安装人大金仓安装主程序</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">bash</span> kdb_install.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装过程的选择：</p><ol><li><p>版本选择：R6</p><figure><img src="`+t+'" alt="命令行交互安装-自定义配置" tabindex="0" loading="lazy"><figcaption>命令行交互安装-自定义配置</figcaption></figure></li><li><p>兼容模式：Orcale兼容</p><figure><img src="'+l+'" alt="命令行交互安装-自定义配置" tabindex="0" loading="lazy"><figcaption>命令行交互安装-自定义配置</figcaption></figure></li><li><p>大小写敏感：敏感</p><figure><img src="'+c+'" alt="命令行交互安装-自定义配置" tabindex="0" loading="lazy"><figcaption>命令行交互安装-自定义配置</figcaption></figure></li></ol><p>安装完成后，会提供将来启动人大金仓服务的指令，并立即启动人大金仓服务</p><figure><img src="'+o+`" alt="命令行交互安装-自定义配置" tabindex="0" loading="lazy"><figcaption>命令行交互安装-自定义配置</figcaption></figure><h2 id="创建数据库" tabindex="-1"><a class="header-anchor" href="#创建数据库" aria-hidden="true">#</a> 创建数据库</h2><h3 id="空间数据库" tabindex="-1"><a class="header-anchor" href="#空间数据库" aria-hidden="true">#</a> 空间数据库</h3><p>需要先创建空间数据库用户，再创建空间数据库、空间数据库引擎和插件拓展</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ksql <span class="token parameter variable">-U</span> SYSTEM <span class="token parameter variable">-W</span> 5Y5<span class="token comment">#123 -d TEST</span>

CREATE DATABASE gisdata<span class="token punctuation">;</span>
create user gisdata with password <span class="token string">&#39;gisdata#123&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置kgis_tools.sh脚本</p><figure><img src="`+d+`" alt="配置kgis_tools.sh脚本" tabindex="0" loading="lazy"><figcaption>配置kgis_tools.sh脚本</figcaption></figure><p>执行脚本kgis_tools.sh</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">su</span> kingbase

<span class="token builtin class-name">cd</span> <span class="token variable">\${SH_PATH}</span>

./kgis_tools.sh init
./kgis_tools.sh create
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+`" alt="执行kgis_tools.sh脚本" tabindex="0" loading="lazy"><figcaption>执行kgis_tools.sh脚本</figcaption></figure><p>注：上图ERROR错误，根据人大金仓技术支持反馈，可能是当时这一步没有重新加载配置文件成功导致的，因此可以尝试单独执行该操作。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">su</span> kingbase

ksql <span class="token parameter variable">-U</span> SYSTEM <span class="token parameter variable">-W</span> 5Y5<span class="token comment">#123 -d gisdata</span>

alter system <span class="token builtin class-name">set</span> allow_system_table_dml <span class="token operator">=</span> on<span class="token punctuation">;</span>
<span class="token keyword">select</span> sys_reload_conf<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
update pg_proc <span class="token builtin class-name">set</span> <span class="token assign-left variable">proisstrict</span><span class="token operator">=</span>false where proname like <span class="token string">&#39;%addgeo%&#39;</span> and <span class="token assign-left variable">proargtypes</span><span class="token operator">=</span><span class="token string">&#39;1043 1043 1043 1043 23 1043 23 16&#39;</span><span class="token punctuation">;</span>
alter system <span class="token builtin class-name">set</span> allow_system_table_dml <span class="token operator">=</span> off<span class="token punctuation">;</span>
<span class="token keyword">select</span> sys_reload_conf<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考文档" tabindex="-1"><a class="header-anchor" href="#参考文档" aria-hidden="true">#</a> 参考文档</h2>`,27),g=[u];function h(b,m){return a(),n("div",null,g)}const f=s(p,[["render",h],["__file","kingbase.html.vue"]]);export{f as default};
